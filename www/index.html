<!doctype html>

<html>
  <head>
    <title>Map</title>

    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
      integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
      crossorigin=""
    />
    <script
      src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
      integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
      crossorigin=""
    ></script>
    <style>
      /* Set the map container size */
      #map {
        display: flex;
        height: 700px;
        width: 100%;
        align-items: center;
        justify-content: center;
      }
    </style>
  </head>

  <body>
    <div id="map"></div>

    <script>
      // Initialize the map
      const map = L.map("map", {
        zoomControl: false, // Disable the zoom control
        maxZoom: 22,
        minZoom: 17.3,
        zoomSnap: 0.05,
        zoomDelta: 0.001,
      }).setView([37.359080394652686, -122.06679719311636], 17.3);

      L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
        attribution:
          '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
      }).addTo(map);

      fetch("graph.json")
        .then((response) => response.json())
        .then((geojsonData) => {
          console.log(geojsonData);
          L.geoJSON(geojsonData, {
            style: function (feature) {
              return {
                color: feature.properties.stroke,
                weight: feature.properties["stroke-width"],
                opacity: feature.properties["stroke-opacity"],
              };
            },
          }).addTo(map);
        })
        .catch((error) => console.error("Error loading GeoJSON:", error));
      /*
      map.on("click", function (e) {
        const lat = e.latlng.lat.toFixed(8); // Round to 6 decimal places
        const lng = e.latlng.lng.toFixed(8); // Round to 6 decimal places

        console.log("Latitude: " + lat + "\nLong: " + lng);

        L.marker([lat, lng])
          .addTo(map)
          .bindPopup(`You clicked here:<br>Lat: ${lat}, Long: ${lng}`)
          .openPopup();
      });
      */
    </script>
  </body>
</html>
